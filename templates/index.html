<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Control de Timelapse</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicons/favicon.ico') }}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='favicons/apple-touch-icon.png') }}">
</head>
<body>
    <div class="main-container">
        <div class="content-wrapper">
            <h2>Timelapse</h2>
            <div class="content-grid">
                <div class="form-section">
                    <form id="timelapseForm">
                        <h2>Camera settings</h2>
                        <section>
                            {% include 'camera-settings.html' %}
                            <button id="previewBtn" type="button">Preview</button>
                        </section>

                        <h2>Video settings</h2>        
                        <section>
                            {% include 'video-settings.html' %}
                            <button type="submit">Iniciar Timelapse</button>
                        </section>
                    </form>
                    <p id="status"></p>
                </div>

                <div class="stream-section">
                    {% include 'stream.html' %}
                </div>
            </div>
        </div>
        <!-- Collapsible Disk Space -->
        <div class="disk-space-container">
            <button class="disk-space-toggle" id="diskSpaceToggle" type="button">
                ðŸ’¾ Espacio en Disco
                <span class="toggle-icon">â–¼</span>
            </button>
            <div class="disk-space-content collapsed" id="diskSpaceContent">
                <div class="disk-info">
                    <div class="disk-stats">
                        <div class="stat-item">
                            <span class="stat-label">Total:</span>
                            <span class="stat-value" id="diskTotal">-- GB</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Usado:</span>
                            <span class="stat-value" id="diskUsed">-- GB</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Libre:</span>
                            <span class="stat-value" id="diskFree">-- GB</span>
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="diskProgressBar">
                            <div class="progress-fill" id="diskProgressFill"></div>
                        </div>
                        <span class="progress-text" id="diskProgressText">0%</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sidebar de Debug (Izquierda) -->
        <div class="sidebar-debug collapsed" id="debugSidebar">
            <div class="sidebar-header">
                <h3>Debug <span class="badge" id="debugBadge">0</span></h3>
                <div class="sidebar-actions">
                    <button class="sidebar-clear" id="debugClearBtn" type="button" title="Limpiar todo">ðŸ—‘</button>
                    <button class="sidebar-toggle" id="debugToggle" type="button">Ã—</button>
                </div>
            </div>
            <div class="sidebar-content">
                {% include 'debug.html' %}
            </div>
        </div>

        <!-- Sidebar de Errores (Derecha) -->
        <div class="sidebar-errors collapsed" id="errorsSidebar">
            <div class="sidebar-header">
                <h3>Errores</h3>
                <button class="sidebar-toggle" id="sidebarToggle" type="button">Ã—</button>
            </div>
            <div class="sidebar-content">
                {% include 'errors.html' %}
            </div>
        </div>

        <!-- Botones flotantes -->
        <button class="sidebar-open-btn debug-btn" id="debugOpenBtn" type="button">ðŸª²</button>
        <button class="sidebar-open-btn error-btn" id="sidebarOpenBtn" type="button">âš </button>
    </div>

    <script src="{{ url_for('static', filename='debug.js') }}"></script>
    <script src="{{ url_for('static', filename='errors.js') }}"></script>
    <script src="{{ url_for('static', filename='timelapses.js') }}"></script>
    <script src="{{ url_for('static', filename='preview.js') }}"></script>
    <script src="{{ url_for('static', filename='disk-space.js') }}"></script>
</body>
</html>